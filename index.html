<!DOCTYPE html>
<script src = 'https://d3js.org/d3.v5.min.js'></script>

<style>
    .chart rect {fill: steelblue;}
    #tooltip {
        opacity : 0;
        position : absolute;
        text-align : center;
        width : 60px;
        height : 40px;
        background: white;
        border : 0px;
    }
</style>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Narrative Visualization</title>
</head>

<body onload='init()'>
<p>This is the paragraph </p>

<svg class="chart"></svg>
<div id="tooltip"></div>

<script>
var width = 120, height = 300;

const data = await d3.csv('https://myevertime.github.io/narrative-viz/data/ds_salaries.csv');
d3.select(".chart")
      .attr("width", width)
      .attr("height", height)
      .selectAll('rect')
      .data(data)
      .enter()
      .append('rect')
      .attr("width", 19)
      .attr("height", function(d) {return height - y(d);})
      .attr("x", function(d,i) {return x(i);})
      .attr("y", function(d) {return y(d);})
      .on("mouseover", function(d,i) {
          tooltip.style("opacity", 1)
          .style("left",(d3.event.pageX)+"px")
          .style("top",(d3.event.pageY)+"px")
          .html("Item #" + i + "is" + d.workyear);
      })
      .on("mouseout", function() {tooltip.style("opacity", 0)})

</script>
</body>
</html>
